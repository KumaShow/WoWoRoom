{"version":3,"sources":["config.js","admin.js","all.js","sweetAlert2.js"],"names":["api_path","token","urlAdminOrders","ordersData","orderCreateDate","ms","timer","Date","y","getFullYear","m","getMonth","d","getDate","renderOrders","orderList","document","querySelector","str","forEach","order","status","paid","orderDate","createdAt","orderProducts","products","map","item","title","quantity","join","id","user","name","tel","address","email","innerHTML","renderBtnDelete","btnDeleteAll","length","classList","add","remove","addEventListener","deleteOrderAll","getOrders","axios","get","headers","then","res","data","orders","renderChart","err","console","log","orderListClick","e","preventDefault","target","nodeName","isPaid","dataset","productId","editOrders","orderId","deleteOrder","put","swalSuccess","swalError","urlDeleteOrder","chartDisplay","total","productItem","category","price","chartData","Object","entries","chart","c3","generate","bindto","columns","type","colors","床架","收納","窗簾","其他","chartFilter","value","urlProducts","urlCarts","productList","form","productListData","productCategory","cartsData","locationPathChanged","location","pathname","includes","init","getProducts","getCarts","recommendationDrag","submitForm","initAdmin","constraints","姓名","presence","message","電話","minimum","Email","地址","errors","validate","showErrorMessage","messages","querySelectorAll","textContent","msg","checkFormInput","inputs","previousElementSibling","targetName","btnSubmitForm","addOrder","urlOrder","userName","trim","userPhone","userEmail","userAddress","payMethod","payment","post","reset","renderProductList","productListClick","productFilterChange","productType","filterArr","filter","product","images","toThousand","origin_price","addToCarts","carts","renderCarts","thead","cartsList","btnClearCartsClick","cartsListClick","num","btnClearCarts","deleteAllCarts","cartItemId","getAttribute","deleteCartsItem","url","numStr","toString","replace","ele","style","cursor","pos","top","left","x","mouseDownHandler","userSelect","scrollLeft","scrollTop","clientX","clientY","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","text","Swal","fire","icon","showConfirmButton"],"mappings":"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","file":"all.js","sourcesContent":["const api_path = \"js-2022\";\nconst token = \"kk6wTiHvysgMHTb81Mkv3q2j0M23\";","const urlAdminOrders = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`;\n\nlet ordersData = [];\n\n// 訂單日期\nfunction orderCreateDate(ms){\n  const timer = new Date(ms * 1000);\n  const y = timer.getFullYear() ;\n  const m = timer.getMonth()+1 >= 10 \n    ? timer.getMonth()+1 \n    : `0${timer.getMonth()+1}`;\n  const d = timer.getDate() >= 10 \n    ? timer.getDate() \n    : `0${timer.getDate()}`;\n  return `${y}/${m}/${d}`;\n};\n\n// 渲染訂單畫面\nfunction renderOrders() {\n  const orderList = document.querySelector('#ordersList');\n  let str = '';\n\n  ordersData.forEach(order => {\n    let status = order.paid ? '已處理' : '未處理';\n    const orderDate = orderCreateDate(order.createdAt);\n    const orderProducts = order.products.map(item => {\n      return `${item.title} x ${item.quantity}`;\n    }).join('<br>');\n\n    str += `\n    <tr class=\"align-middle\">\n      <th scope=\"row\">${order.id}</th>\n      <td>${order.user.name}<br>${order.user.tel}</td>\n      <td>${order.user.address}</td>\n      <td>${order.user.email}</td>\n      <td>${orderProducts}</td>\n      <td>${orderDate}</td>\n      <td class=\"text-info\">\n        <a href=\"#!\" class=\"text-decoration-underline link-info\" data-paid=\"${order.paid}\" data-id=\"${order.id}\">\n          ${status}\n        </a>\n      </td>\n      <td>\n        <button type=\"button\" class=\"btn btn-danger\" data-id=\"${order.id}\" >刪除</button>\n      </td>\n    </tr>`\n  })\n  orderList.innerHTML = str;\n}\n\n// 渲染按鈕 清除全部訂單\nfunction renderBtnDelete() {\n  const btnDeleteAll = document.querySelector('#btnDeleteAll');\n  if(ordersData.length === 0) {\n    btnDeleteAll.classList.add('d-none');\n  } else {\n    btnDeleteAll.classList.remove('d-none');\n  }\n  btnDeleteAll.addEventListener('click', deleteOrderAll);\n}\n\n// 取得訂單資料\nfunction getOrders() {\n  axios.get(urlAdminOrders,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(res => {\n    ordersData = res.data.orders;\n    renderChart(ordersData);\n    renderOrders();\n    renderBtnDelete();\n  }).catch(err => {\n    console.log(err);\n  });\n}\n\n// 訂單點擊事件監聽\nfunction orderListClick() {\n  const orderList = document.querySelector('#ordersList');\n  if (orderList) {\n    orderList.addEventListener('click', e=> {\n      e.preventDefault();\n      if(e.target.nodeName === 'A') {\n        let isPaid = e.target.dataset.paid;\n        const productId = e.target.dataset.id;\n        isPaid = isPaid === 'false' ? false : true;\n        editOrders(productId, isPaid);\n        return;\n      } else if (e.target.nodeName === 'BUTTON') {\n        const orderId = e.target.dataset.id;\n        deleteOrder(orderId);\n        return;\n      } else {\n        return;\n      }\n    })\n  }\n}\n\n// 修改訂單狀態\nfunction editOrders(id, isPaid) {\n  isPaid = !isPaid;\n  axios.put(urlAdminOrders,\n    {\n      \"data\": {\n        \"id\": id,\n        \"paid\": isPaid\n      }\n    },\n    {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token\n      }\n    })\n  .then(() => {\n    getOrders();\n    swalSuccess('修改訂單成功', 'success');\n  }).catch(() => {\n    swalError('修改頂單失敗', 'error');\n  });\n}\n\n// 刪除單筆訂單\nfunction deleteOrder(id) {\n  const urlDeleteOrder = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${id}`;\n  axios.delete(urlDeleteOrder,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(() => {\n    getOrders();\n    swalSuccess('已刪除單筆訂單', 'success');\n  }).catch(() => {\n    swalError('刪除單筆訂單失敗', 'error');\n  });\n}\n\n// 刪除所有訂單\nfunction deleteOrderAll() {\n  axios.delete(urlAdminOrders,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(() => {\n    getOrders();\n    swalSuccess('已刪除所有訂單', 'success');\n  }).catch(() => {\n    swalError('目前沒有訂單', 'warning');\n  })\n}\n\n// c3 圖表\nfunction renderChart(ordersData) {\n  const chartDisplay = document.querySelector('#chart');\n  if(ordersData.length === 0){\n    chartDisplay.classList.add('d-none');\n  } else {\n    chartDisplay.classList.remove('d-none');\n  }\n  \n  let total = {};\n  ordersData.forEach(order => {\n    order.products.forEach(productItem => {\n      total[productItem.category] \n        ? total[productItem.category] += productItem.price * productItem.quantity\n        : total[productItem.category] = productItem.price * productItem.quantity;\n    })\n  });\n  const chartData = Object.entries(total);\n  const chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n      columns: chartData,\n      type: \"pie\",\n      colors: {\n        床架: \"#DACBFF\",\n        收納: \"#9D7FEA\",\n        窗簾: \"#5434A7\",\n        其他: \"#301E5F\",\n      },\n    },\n  });\n}\n// TODO: 圖表切換\nfunction chartFilter() {\n  const chartFilter = document.querySelector('#chartFilter');\n  chartFilter.addEventListener('change', e => {\n    console.log(e.target);\n    console.log(e.target.value);\n  })\n}\n\n/* TODO \n  1. 圖表 切換\n*/\n","const urlProducts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`;\nconst urlCarts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\nconst productList = document.querySelector('#productList');\nconst form = document.querySelector('#orderForm');\n\nlet productListData;\nlet productCategory = {};\nlet cartsData;\n\n// 不同頁面分別執行初始化\nfunction locationPathChanged() {\n  if (location.pathname.includes('index')) {\n    // 首頁初始化\n    function init() {\n      getProducts();\n      getCarts();\n      recommendationDrag();\n      submitForm();\n    }\n    init();\n  } else {\n    // 後臺初始化\n    function initAdmin() {\n      getOrders();\n      orderListClick();\n    }\n    initAdmin();\n  }\n}\nlocationPathChanged();\n\n// 驗證套件\nconst constraints = {\n  姓名: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  },\n  電話: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"號碼需超過 8 碼\"\n    }\n  },\n  Email: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    email: {\n      message: \"格式有誤\"\n    }\n  },\n  地址: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  }\n};\nconst errors = validate(form, constraints);\n\n// 顯示訂單驗證錯誤資訊\nfunction showErrorMessage(errors) {\n  const messages = document.querySelectorAll(\"[data-msg]\");\n  messages.forEach((item) => {\n    item.textContent = \"\";\n    item.textContent = errors[item.dataset.msg];\n  });\n}\n\n// 監控所有 input 的操作\nfunction checkFormInput() {\n  const inputs = document.querySelectorAll(\"[data-validate]\");\n  inputs.forEach((item) => {\n    item.addEventListener(\"change\", e => {\n      e.preventDefault();\n      // 先清空錯誤訊息\n      item.previousElementSibling.textContent = \"\";\n      const targetName = item.name;\n      const errors = validate(form, constraints);\n      // 針對正在操作的欄位呈現警告訊息\n      if (errors) {\n        document.querySelector(`[data-msg='${targetName}']`).textContent =\n          errors[targetName];\n      }\n    });\n  });\n}\n\n// 表單送出監聽\nfunction submitForm() {\n  const btnSubmitForm = document.querySelector('#btnSubmitForm');\n  btnSubmitForm.addEventListener('click', e => {\n    e.preventDefault();\n    if (!cartsData.length) {\n      swalError('購物車沒有商品!', 'error', '快去大肆採購吧ヽ(✿ﾟ▽ﾟ)ノ');\n      return;\n    } \n\n    checkFormInput();\n\n    let errors = validate(form, constraints);\n    // 有錯誤則顯示錯誤訊息\n    if(errors) {\n      showErrorMessage(errors);\n    } else {\n      addOrder();\n    }\n  });\n}\n\n// 送出訂單\nfunction addOrder() {\n  const urlOrder = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`;\n  const userName = document.querySelector(\"#userName\").value.trim();\n  const userPhone = document.querySelector(\"#userPhone\").value.trim();\n  const userEmail = document.querySelector(\"#userEmail\").value.trim();\n  const userAddress = document.querySelector(\"#userAddress\").value.trim();\n  const payMethod = document.querySelector(\"#payMethod\").value;\n\n  const order = {\n    data: {\n      user: {\n        name: userName,\n        tel: userPhone,\n        email: userEmail,\n        address: userAddress,\n        payment: payMethod,\n      }\n    }\n  }\n\n  axios.post(urlOrder,order)\n    .then(() => {\n      form.reset();\n      getCarts();\n      swalSuccess('已送出訂單', 'success');\n    })\n    .catch(() => {\n      swalError('訂單送出失敗', 'error', '請確認訂單是否填寫正確!');\n    });\n}\n\n// 取得產品列表\nfunction getProducts() {\n  axios.get(urlProducts)\n  .then((res) => {\n    productListData = res.data.products;\n    renderProductList(productListData);\n    productListClick();\n    productFilterChange(productListData);\n  })\n  .catch((err) => {\n    console.log(err);\n    console.log('產品列表沒有資料');\n  });\n}\n\n// 產品篩選\nfunction productFilterChange() {\n  const productType = document.querySelector('#productType');\n\n  productType.addEventListener('change', e => {\n    const category = e.target.value;\n\n    if(category === '全部') {\n      renderProductList(productListData);\n      return;\n    }\n\n    const filterArr = productListData.filter(item => {\n      return item.category === category;\n    });\n    renderProductList(filterArr);\n  })\n}\n\n// 渲染產品列表\nfunction renderProductList(productListData) {\n  let str = '';\n  productListData.forEach(product => {\n    str += `\n      <li class=\"products-item col-md-6 col-lg-4 col-xl-3\">\n        <div class=\"card p-0\">\n          <span class=\"products-tag\">新品</span>\n          <img src=\"${product.images}\" class=\"card-img-top\" alt=\"${product.title}\">\n          <div class=\"card-body p-0\">\n            <button type=\"button\" class=\"btn btn-black rounded-0 pb-2 w-100\" data-id=\"${product.id}\">加入購物車</button>\n            <h5 class=\"card-title pb-2\">${product.title}</h5>\n            <p class=\"card-text fs-5 text-decoration-line-through\">NT$${toThousand(product.origin_price)}</p>\n            <p class=\"card-text fs-3\">NT$${toThousand(product.price)}</p>\n          </div>\n        </div>\n      </li>\n    `;\n  })\n  productList.innerHTML = str;\n}\n\n// 加入購物車\nfunction productListClick() {\n  productList.addEventListener('click', e => {\n    if(e.target.nodeName !== 'BUTTON') {\n      return;\n    }\n    const productId = e.target.dataset.id;\n    addToCarts(productId);\n  })\n}\n\n// 取得購物車資料\nfunction getCarts() {\n  axios.get(urlCarts)\n    .then(res => {\n      cartsData = res.data.carts;\n      renderCarts(cartsData);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\n// 顯示購物車資料\nfunction renderCarts(cartsData) {\n  const thead = document.querySelector('.cart thead');\n  let total = 0;\n  let str = '';\n\n  if(cartsData.length === 0) {\n    thead.classList.add('d-none');\n    cartsList.innerHTML = `\n      <tr class=\"text-center\">\n        <td class=\"border-0 fs-3\">目前購物車無商品!</td>\n      </tr>`;\n  } else {\n    const cartsList = document.querySelector('#cartsList');\n    thead.classList.remove('d-none');\n    cartsData.forEach(item => {\n      total += item.quantity * item.product.price;\n      str += `\n        <tr>\n          <th scope=\"row\" class=\"d-flex align-items-center fw-normal\">\n            <img src=\"${item.product.images}\" alt=\"${item.product.title}\" class=\"cart-product-img\">\n            <p class=\"lh-lg\">${item.product.title}</p>\n          </th>\n          <td>NT$${toThousand(item.product.price)}</td>\n          <td>${item.quantity}</td>\n          <td>NT$${toThousand(item.product.price * item.quantity)}</td>\n          <td class=\"text-end\">\n            <a href=\"#!\" class=\"border-0 bg-transparent link-black\" data-id=\"${item.id}\">\n              <i class=\"fa-solid fa-x\" data-id=\"${item.id}\"></i>\n            </a>\n          </td>\n        </tr>`;\n    });\n    // 總金額\n    str += `\n      <tr class=\"carts-total\">\n        <td class=\"border-0\">\n          <button type=\"button\" class=\"btn btn-outline-black py-3 px-6\" id=\"btnClearCarts\">刪除所有品項</button>\n        </td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\">\n          <p>總金額</p>\n        </td>\n        <td class=\"border-0 fs-3\">NT$${toThousand(total)}</td>\n      </tr>\n    `\n    cartsList.innerHTML = str;\n    btnClearCartsClick();\n    cartsListClick();\n  }\n}\n\n// 加入購物車\nfunction addToCarts(id) {\n  let num = 1;\n  cartsData.forEach(item => {\n    if(item.product.id === id) {\n      num = item.quantity += 1;\n    }\n  })\n  const data = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": num\n    }\n  };\n\n  axios.post(urlCarts, data)\n  .then(() => {\n    getCarts();\n    swalSuccess('已加入購物車', 'success');\n  })\n  .catch(() => {\n    swalError('未加入購物車', 'error');\n  });\n}\n\n// 綁定清除購物車按鈕\nfunction btnClearCartsClick() {\n  const btnClearCarts = document.querySelector('#btnClearCarts');\n  btnClearCarts.addEventListener('click', e => {\n    e.preventDefault();\n    deleteAllCarts();\n  });\n}\n\n// 購物車點擊事件\nfunction cartsListClick() {\n  cartsList.addEventListener('click', e => {\n    e.preventDefault();\n    const cartItemId = e.target.getAttribute('data-id');\n\n    if(cartItemId === null) {\n      return;\n    } else {\n      deleteCartsItem(cartItemId);\n      return;\n    }\n    // if (e.target.nodeName === 'SELECT'){\n    //   e.target.addEventListener('change', e => {\n    //     const cartItemNum = e.target.value;\n    //     const cartItemId = e.target.dataset.id;\n    //     editCartsNum(cartItemId, Number(cartItemNum));\n    //     return;\n    //   })\n  });\n}\n\n// 刪除購物車單筆\nfunction deleteCartsItem(id) {\n  const url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`;\n\n  axios.delete(url,id)\n    .then(() => {\n      getCarts();\n    })\n    .catch(() => {\n      console.log('沒有這筆資料');\n    })\n}\n\n// 刪除購物車所有品項\nfunction deleteAllCarts() {\n  axios.delete(urlCarts)\n    .then(() => {\n      swalSuccess('已清空購物車', 'success');\n      getCarts();\n    })\n    .catch(err => {\n      console.log(err);\n      swalError('清空失敗', 'error');\n    });\n}\n\n// 千分位\nfunction toThousand(num) {\n  const numStr = num.toString();\n  return numStr.replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\n// 好評推薦拖拉功能\nfunction recommendationDrag() {\n  document.addEventListener(\"DOMContentLoaded\", function () {\n    const ele = document.querySelector(\".recommendation-wall\");\n    ele.style.cursor = \"grab\";\n    let pos = { top: 0, left: 0, x: 0, y: 0 };\n    const mouseDownHandler = function (e) {\n      ele.style.cursor = \"grabbing\";\n      ele.style.userSelect = \"none\";\n  \n      pos = {\n        left: ele.scrollLeft,\n        top: ele.scrollTop,\n        // Get the current mouse position\n        x: e.clientX,\n        y: e.clientY,\n      };\n  \n      document.addEventListener(\"mousemove\", mouseMoveHandler);\n      document.addEventListener(\"mouseup\", mouseUpHandler);\n    };\n    const mouseMoveHandler = function (e) {\n      // How far the mouse has been moved\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n  \n      // Scroll the element\n      ele.scrollTop = pos.top - dy;\n      ele.scrollLeft = pos.left - dx;\n    };\n    const mouseUpHandler = function () {\n      ele.style.cursor = \"grab\";\n      ele.style.removeProperty(\"user-select\");\n  \n      document.removeEventListener(\"mousemove\", mouseMoveHandler);\n      document.removeEventListener(\"mouseup\", mouseUpHandler);\n    };\n    // Attach the handler\n    ele.addEventListener(\"mousedown\", mouseDownHandler);\n  });\n}\n\n// 渲染購物車數量下拉\n// function renderCartsNum(num) {\n//   const maxNum = 10;\n//   const select = document.querySelector('[data-qty]');\n//   let str = '';\n//   for(let i = 1; i <= maxNum; i++) {\n//     str += `<option value=\"${i}\">${i}</option>`\n//   }\n//   console.log(select);\n  // select.innerHTML = str;\n  // select.value = num;\n  // return str;\n// }\n\n// 編輯購物車產品數量\n// function editCartsNum(id, num) {\n//   const data = {\n//   \"data\": {\n//     \"id\": id,\n//     \"quantity\": num\n//   }\n// }\n\n//   axios.patch(urlCarts, data)\n//     .then(res => {\n//       // console.log(res.data.carts);\n//       const carts = res.data.carts;\n//       console.log(carts);\n//       renderCarts(carts);\n//     })\n//     .catch(err => {\n//       console.log(err);\n//     })\n// }","  // Alert 成功\n  function swalSuccess(title, status, text) {\n    Swal.fire({\n      icon: status,\n      title: title,\n      text: text,\n      showConfirmButton: true,\n      timer: 2500\n    })\n  }\n\n  // Alert 失敗\n  function swalError(title, status, text) {\n    Swal.fire({\n      icon: status,\n      title: title,\n      text: text,\n      showConfirmButton: true,\n    })\n  }"]}