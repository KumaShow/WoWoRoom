{"version":3,"sources":["config.js","admin.js","all.js","sweetAlert2.js"],"names":["api_path","token","config","headers","urlAdminOrders","ordersData","orderCreateDate","ms","timer","Date","y","getFullYear","m","getMonth","d","getDate","renderOrders","orderList","document","querySelector","str","sort","a","b","createdAt","forEach","order","status","paid","orderDate","orderProducts","products","map","item","title","quantity","join","id","user","name","tel","address","email","innerHTML","renderBtnDelete","btnDeleteAll","length","classList","add","remove","addEventListener","deleteOrderAll","getOrders","axios","get","then","res","data","orders","renderChart","err","console","log","orderListClick","e","preventDefault","target","nodeName","isPaid","dataset","productId","editOrders","orderId","deleteOrder","put","swalSuccess","swalError","urlDeleteOrder","chartDisplay","total","productItem","category","price","chartData","Object","entries","chart","c3","generate","bindto","columns","type","colors","床架","收納","窗簾","其他","urlProducts","urlCarts","productList","form","cartsList","productListData","productCategory","cartsData","location","pathname","includes","getProducts","getCarts","recommendationDrag","submitForm","constraints","姓名","presence","message","電話","minimum","Email","地址","errors","validate","showErrorMessage","messages","querySelectorAll","textContent","msg","checkFormInput","inputs","previousElementSibling","targetName","btnSubmitForm","addOrder","urlOrder","userName","value","trim","userPhone","userEmail","userAddress","payMethod","payment","post","reset","renderProductList","productFilterChange","productListClick","productType","filterArr","filter","product","images","toThousand","origin_price","addToCarts","carts","renderCarts","thead","btnClearCarts","deleteAllCarts","num","cartItemId","getAttribute","deleteCartsItem","url","numStr","toString","replace","ele","style","cursor","pos","top","left","x","mouseDownHandler","userSelect","scrollLeft","scrollTop","clientX","clientY","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","text","Swal","fire","icon","showConfirmButton"],"mappings":";;AAAA,IAAMA,QAAQ,GAAG,SAAjB;AACA,IAAMC,KAAK,GAAG,8BAAd;AACA,IAAMC,MAAM,GAAG;AACXC,EAAAA,OAAO,EAAE;AACP,qBAAiBF;AADV;AADE,CAAf;;;ACFA,IAAMG,cAAc,iEAA0DJ,QAA1D,YAApB;AAEA,IAAIK,UAAU,GAAG,EAAjB,C,CAEA;;AACA,SAASC,eAAT,CAAyBC,EAAzB,EAA4B;AAC1B,MAAMC,KAAK,GAAG,IAAIC,IAAJ,CAASF,EAAE,GAAG,IAAd,CAAd;AACA,MAAMG,CAAC,GAAGF,KAAK,CAACG,WAAN,EAAV;AACA,MAAMC,CAAC,GAAGJ,KAAK,CAACK,QAAN,KAAiB,CAAjB,IAAsB,EAAtB,GACNL,KAAK,CAACK,QAAN,KAAiB,CADX,cAEFL,KAAK,CAACK,QAAN,KAAiB,CAFf,CAAV;AAGA,MAAMC,CAAC,GAAGN,KAAK,CAACO,OAAN,MAAmB,EAAnB,GACNP,KAAK,CAACO,OAAN,EADM,cAEFP,KAAK,CAACO,OAAN,EAFE,CAAV;AAGA,mBAAUL,CAAV,cAAeE,CAAf,cAAoBE,CAApB;AACD;;AAAA,C,CAED;;AACA,SAASE,YAAT,CAAsBX,UAAtB,EAAkC;AAChC,MAAMY,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAlB;AACA,MAAIC,GAAG,GAAG,EAAV,CAFgC,CAGhC;;AACAf,EAAAA,UAAU,CAACgB,IAAX,CAAgB,UAACC,CAAD,EAAGC,CAAH;AAAA,WAASA,CAAC,CAACC,SAAF,GAAcF,CAAC,CAACE,SAAzB;AAAA,GAAhB;AAEAnB,EAAAA,UAAU,CAACoB,OAAX,CAAmB,UAAAC,KAAK,EAAI;AAC1B,QAAIC,MAAM,GAAGD,KAAK,CAACE,IAAN,GAAa,KAAb,GAAqB,KAAlC;AACA,QAAMC,SAAS,GAAGvB,eAAe,CAACoB,KAAK,CAACF,SAAP,CAAjC;AACA,QAAMM,aAAa,GAAGJ,KAAK,CAACK,QAAN,CAAeC,GAAf,CAAmB,UAAAC,IAAI,EAAI;AAC/C,uBAAUA,IAAI,CAACC,KAAf,gBAA0BD,IAAI,CAACE,QAA/B;AACD,KAFqB,EAEnBC,IAFmB,CAEd,MAFc,CAAtB;AAIAhB,IAAAA,GAAG,yEAEiBM,KAAK,CAACW,EAFvB,8BAGKX,KAAK,CAACY,IAAN,CAAWC,IAHhB,iBAG2Bb,KAAK,CAACY,IAAN,CAAWE,GAHtC,8BAIKd,KAAK,CAACY,IAAN,CAAWG,OAJhB,8BAKKf,KAAK,CAACY,IAAN,CAAWI,KALhB,8BAMKZ,aANL,8BAOKD,SAPL,qIASuEH,KAAK,CAACE,IAT7E,0BAS+FF,KAAK,CAACW,EATrG,4BAUKV,MAVL,yHAcyDD,KAAK,CAACW,EAd/D,sDAAH;AAiBD,GAxBD;AAyBApB,EAAAA,SAAS,CAAC0B,SAAV,GAAsBvB,GAAtB;AACAwB,EAAAA,eAAe;AAChB,C,CAED;;;AACA,SAASA,eAAT,GAA2B;AACzB,MAAMC,YAAY,GAAG3B,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;;AACA,MAAGd,UAAU,CAACyC,MAAX,KAAsB,CAAzB,EAA4B;AAC1BD,IAAAA,YAAY,CAACE,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACLH,IAAAA,YAAY,CAACE,SAAb,CAAuBE,MAAvB,CAA8B,QAA9B;AACD;;AACDJ,EAAAA,YAAY,CAACK,gBAAb,CAA8B,OAA9B,EAAuCC,cAAvC;AACD,C,CAED;;;AACA,SAASC,SAAT,GAAqB;AACnBC,EAAAA,KAAK,CAACC,GAAN,CAAUlD,cAAV,EAAyBF,MAAzB,EACGqD,IADH,CACQ,UAACC,GAAD,EAAS;AACbnD,IAAAA,UAAU,GAAGmD,GAAG,CAACC,IAAJ,CAASC,MAAtB;AACAC,IAAAA,WAAW,CAACtD,UAAD,CAAX;AACAW,IAAAA,YAAY,CAACX,UAAD,CAAZ;AACD,GALH,WAMS,UAACuD,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GARH;AASD,C,CAED;;;AACA,SAASG,cAAT,GAA0B;AACxB,MAAM9C,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAlB;;AACA,MAAIF,SAAJ,EAAe;AACbA,IAAAA,SAAS,CAACiC,gBAAV,CAA2B,OAA3B,EAAoC,UAAAc,CAAC,EAAG;AACtCA,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAGD,CAAC,CAACE,MAAF,CAASC,QAAT,KAAsB,GAAzB,EAA8B;AAC5B,YAAIC,MAAM,GAAGJ,CAAC,CAACE,MAAF,CAASG,OAAT,CAAiBzC,IAA9B;AACA,YAAM0C,SAAS,GAAGN,CAAC,CAACE,MAAF,CAASG,OAAT,CAAiBhC,EAAnC;AACA+B,QAAAA,MAAM,GAAGA,MAAM,KAAK,OAAX,GAAqB,KAArB,GAA6B,IAAtC;AACAG,QAAAA,UAAU,CAACD,SAAD,EAAYF,MAAZ,CAAV;AACA;AACD,OAND,MAMO,IAAIJ,CAAC,CAACE,MAAF,CAASC,QAAT,KAAsB,QAA1B,EAAoC;AACzC,YAAMK,OAAO,GAAGR,CAAC,CAACE,MAAF,CAASG,OAAT,CAAiBhC,EAAjC;AACAoC,QAAAA,WAAW,CAACD,OAAD,CAAX;AACA;AACD,OAJM,MAIA;AACL;AACD;AACF,KAfD;AAgBD;AACF,C,CAED;;;AACA,SAASD,UAAT,CAAoBlC,EAApB,EAAwB+B,MAAxB,EAAgC;AAC9BA,EAAAA,MAAM,GAAG,CAACA,MAAV;AAEA,MAAMX,IAAI,GAAG;AACT,YAAQ;AACN,YAAMpB,EADA;AAEN,cAAQ+B;AAFF;AADC,GAAb;AAOAf,EAAAA,KAAK,CAACqB,GAAN,CAAUtE,cAAV,EAA0BqD,IAA1B,EAAgCvD,MAAhC,EACGqD,IADH,CACQ,UAACC,GAAD,EAAS;AACbnD,IAAAA,UAAU,GAAGmD,GAAG,CAACC,IAAJ,CAASC,MAAtB;AACA1C,IAAAA,YAAY,CAACX,UAAD,CAAZ;AACAsE,IAAAA,WAAW,CAAC,QAAD,EAAW,SAAX,CAAX;AACD,GALH,WAKW,YAAM;AACbC,IAAAA,SAAS,CAAC,QAAD,EAAW,OAAX,CAAT;AACD,GAPH;AAQD,C,CAED;;;AACA,SAASH,WAAT,CAAqBpC,EAArB,EAAyB;AACvB,MAAMwC,cAAc,iEAA0D7E,QAA1D,qBAA6EqC,EAA7E,CAApB;AACAgB,EAAAA,KAAK,UAAL,CAAawB,cAAb,EAA4B3E,MAA5B,EACGqD,IADH,CACQ,UAACC,GAAD,EAAS;AACbnD,IAAAA,UAAU,GAAGmD,GAAG,CAACC,IAAJ,CAASC,MAAtB;AACA1C,IAAAA,YAAY,CAACX,UAAD,CAAZ;AACAsD,IAAAA,WAAW,CAACtD,UAAD,CAAX;AACAsE,IAAAA,WAAW,CAAC,SAAD,EAAY,SAAZ,CAAX;AACD,GANH,WAOS,UAACf,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAgB,IAAAA,SAAS,CAAC,UAAD,EAAa,OAAb,CAAT;AACD,GAVH;AAWD,C,CAED;;;AACA,SAASzB,cAAT,GAA0B;AACxBE,EAAAA,KAAK,UAAL,CAAajD,cAAb,EAA4BF,MAA5B,EACGqD,IADH,CACQ,UAACC,GAAD,EAAS;AACbnD,IAAAA,UAAU,GAAGmD,GAAG,CAACC,IAAJ,CAASC,MAAtB;AACA1C,IAAAA,YAAY,CAACX,UAAD,CAAZ;AACAsD,IAAAA,WAAW,CAACtD,UAAD,CAAX;AACAsE,IAAAA,WAAW,CAAC,SAAD,EAAY,SAAZ,CAAX;AACD,GANH,WAOS,YAAM;AACXC,IAAAA,SAAS,CAAC,QAAD,EAAW,SAAX,CAAT;AACD,GATH;AAUD,C,CAED;;;AACA,SAASjB,WAAT,CAAqBtD,UAArB,EAAiC;AAC/B,MAAMyE,YAAY,GAAG5D,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAArB;;AACA,MAAGd,UAAU,CAACyC,MAAX,KAAsB,CAAzB,EAA2B;AACzBgC,IAAAA,YAAY,CAAC/B,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACL8B,IAAAA,YAAY,CAAC/B,SAAb,CAAuBE,MAAvB,CAA8B,QAA9B;AACD;;AAED,MAAI8B,KAAK,GAAG,EAAZ;AACA1E,EAAAA,UAAU,CAACoB,OAAX,CAAmB,UAAAC,KAAK,EAAI;AAC1BA,IAAAA,KAAK,CAACK,QAAN,CAAeN,OAAf,CAAuB,UAAAuD,WAAW,EAAI;AACpCD,MAAAA,KAAK,CAACC,WAAW,CAACC,QAAb,CAAL,GACIF,KAAK,CAACC,WAAW,CAACC,QAAb,CAAL,IAA+BD,WAAW,CAACE,KAAZ,GAAoBF,WAAW,CAAC7C,QADnE,GAEI4C,KAAK,CAACC,WAAW,CAACC,QAAb,CAAL,GAA8BD,WAAW,CAACE,KAAZ,GAAoBF,WAAW,CAAC7C,QAFlE;AAGD,KAJD;AAKD,GAND;AAQA,MAAMgD,SAAS,GAAGC,MAAM,CAACC,OAAP,CAAeN,KAAf,CAAlB;AACA,MAAMO,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACxBC,IAAAA,MAAM,EAAE,QADgB;AAExBhC,IAAAA,IAAI,EAAE;AACJiC,MAAAA,OAAO,EAAEP,SADL;AAEJQ,MAAAA,IAAI,EAAE,KAFF;AAGJC,MAAAA,MAAM,EAAE;AACNC,QAAAA,EAAE,EAAE,SADE;AAENC,QAAAA,EAAE,EAAE,SAFE;AAGNC,QAAAA,EAAE,EAAE,SAHE;AAINC,QAAAA,EAAE,EAAE;AAJE;AAHJ;AAFkB,GAAZ,CAAd;AAaD;;;ACvLD,IAAMC,WAAW,oEAA6DjG,QAA7D,cAAjB;AACA,IAAMkG,QAAQ,oEAA6DlG,QAA7D,WAAd;AACA,IAAMmG,WAAW,GAAGjF,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;AACA,IAAMiF,IAAI,GAAGlF,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAb;AACA,IAAMkF,SAAS,GAAGnF,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB;AAEA,IAAImF,eAAJ;AACA,IAAIC,eAAe,GAAG,EAAtB;AACA,IAAIC,SAAS,GAAG,EAAhB,C,CAEA;;AACA,IAAIC,QAAQ,CAACC,QAAT,CAAkBC,QAAlB,CAA2B,OAA3B,KACAF,QAAQ,CAACC,QAAT,KAAsB,GADtB,IAEAD,QAAQ,CAACC,QAAT,KAAsB,UAF1B,EAEsC;AACpC;AACAE,EAAAA,WAAW;AACXC,EAAAA,QAAQ;AACRC,EAAAA,kBAAkB;AAClBC,EAAAA,UAAU;AACX,CARD,MAQO,IAAIN,QAAQ,CAACC,QAAT,CAAkBC,QAAlB,CAA2B,OAA3B,CAAJ,EAAwC;AAC7C;AACAvD,EAAAA,SAAS;AACTW,EAAAA,cAAc;AACf,C,CAED;;;AACA,IAAMiD,WAAW,GAAG;AAClBC,EAAAA,EAAE,EAAE;AACFC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD;AADR,GADc;AAMlBC,EAAAA,EAAE,EAAE;AACFF,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADR;AAIFrE,IAAAA,MAAM,EAAE;AACNuE,MAAAA,OAAO,EAAE,CADH;AAENF,MAAAA,OAAO,EAAE;AAFH;AAJN,GANc;AAelBG,EAAAA,KAAK,EAAE;AACLJ,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADL;AAILzE,IAAAA,KAAK,EAAE;AACLyE,MAAAA,OAAO,EAAE;AADJ;AAJF,GAfW;AAuBlBI,EAAAA,EAAE,EAAE;AACFL,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD;AADR;AAvBc,CAApB;AA6BA,IAAMK,MAAM,GAAGC,QAAQ,CAACrB,IAAD,EAAOY,WAAP,CAAvB,C,CAEA;;AACA,SAASU,gBAAT,CAA0BF,MAA1B,EAAkC;AAChC,MAAMG,QAAQ,GAAGzG,QAAQ,CAAC0G,gBAAT,CAA0B,YAA1B,CAAjB;AACAD,EAAAA,QAAQ,CAAClG,OAAT,CAAiB,UAACQ,IAAD,EAAU;AACzBA,IAAAA,IAAI,CAAC4F,WAAL,GAAmB,EAAnB;AACA5F,IAAAA,IAAI,CAAC4F,WAAL,GAAmBL,MAAM,CAACvF,IAAI,CAACoC,OAAL,CAAayD,GAAd,CAAzB;AACD,GAHD;AAID,C,CAED;;;AACA,SAASC,cAAT,GAA0B;AACxB,MAAMC,MAAM,GAAG9G,QAAQ,CAAC0G,gBAAT,CAA0B,iBAA1B,CAAf;AACAI,EAAAA,MAAM,CAACvG,OAAP,CAAe,UAACQ,IAAD,EAAU;AACvBA,IAAAA,IAAI,CAACiB,gBAAL,CAAsB,QAAtB,EAAgC,UAAAc,CAAC,EAAI;AACnCA,MAAAA,CAAC,CAACC,cAAF,GADmC,CAEnC;;AACAhC,MAAAA,IAAI,CAACgG,sBAAL,CAA4BJ,WAA5B,GAA0C,EAA1C;AACA,UAAMK,UAAU,GAAGjG,IAAI,CAACM,IAAxB;AACA,UAAMiF,MAAM,GAAGC,QAAQ,CAACrB,IAAD,EAAOY,WAAP,CAAvB,CALmC,CAMnC;;AACA,UAAIQ,MAAJ,EAAY;AACVtG,QAAAA,QAAQ,CAACC,aAAT,sBAAqC+G,UAArC,SAAqDL,WAArD,GACEL,MAAM,CAACU,UAAD,CADR;AAED;AACF,KAXD;AAYD,GAbD;AAcD,C,CAED;;;AACA,SAASnB,UAAT,GAAsB;AACpB,MAAMoB,aAAa,GAAGjH,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAtB;AACAgH,EAAAA,aAAa,CAACjF,gBAAd,CAA+B,OAA/B,EAAwC,UAAAc,CAAC,EAAI;AAC3CA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI,CAACuC,SAAS,CAAC1D,MAAf,EAAuB;AACrB8B,MAAAA,SAAS,CAAC,UAAD,EAAa,OAAb,EAAsB,iBAAtB,CAAT;AACA;AACD;;AAEDmD,IAAAA,cAAc;AAEd,QAAIP,MAAM,GAAGC,QAAQ,CAACrB,IAAD,EAAOY,WAAP,CAArB,CAT2C,CAU3C;;AACA,QAAGQ,MAAH,EAAW;AACTE,MAAAA,gBAAgB,CAACF,MAAD,CAAhB;AACD,KAFD,MAEO;AACLY,MAAAA,QAAQ;AACT;AACF,GAhBD;AAiBD,C,CAED;;;AACA,SAASA,QAAT,GAAoB;AAClB,MAAMC,QAAQ,oEAA6DrI,QAA7D,YAAd;AACA,MAAMsI,QAAQ,GAAGpH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCoH,KAApC,CAA0CC,IAA1C,EAAjB;AACA,MAAMC,SAAS,GAAGvH,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCoH,KAArC,CAA2CC,IAA3C,EAAlB;AACA,MAAME,SAAS,GAAGxH,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCoH,KAArC,CAA2CC,IAA3C,EAAlB;AACA,MAAMG,WAAW,GAAGzH,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCoH,KAAvC,CAA6CC,IAA7C,EAApB;AACA,MAAMI,SAAS,GAAG1H,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCoH,KAAvD;AAEA,MAAM7G,KAAK,GAAG;AACZ+B,IAAAA,IAAI,EAAE;AACJnB,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE+F,QADF;AAEJ9F,QAAAA,GAAG,EAAEiG,SAFD;AAGJ/F,QAAAA,KAAK,EAAEgG,SAHH;AAIJjG,QAAAA,OAAO,EAAEkG,WAJL;AAKJE,QAAAA,OAAO,EAAED;AALL;AADF;AADM,GAAd;AAYAvF,EAAAA,KAAK,CAACyF,IAAN,CAAWT,QAAX,EAAoB3G,KAApB,EACG6B,IADH,CACQ,YAAM;AACV6C,IAAAA,IAAI,CAAC2C,KAAL;AACAlC,IAAAA,QAAQ;AACRlC,IAAAA,WAAW,CAAC,OAAD,EAAU,SAAV,CAAX;AACD,GALH,WAMS,YAAM;AACXC,IAAAA,SAAS,CAAC,QAAD,EAAW,OAAX,EAAoB,cAApB,CAAT;AACD,GARH;AASD,C,CAED;;;AACA,SAASgC,WAAT,GAAuB;AACrBvD,EAAAA,KAAK,CAACC,GAAN,CAAU2C,WAAV,EACG1C,IADH,CACQ,UAACC,GAAD,EAAS;AACb8C,IAAAA,eAAe,GAAG9C,GAAG,CAACC,IAAJ,CAAS1B,QAA3B;AACAiH,IAAAA,iBAAiB,CAAC1C,eAAD,CAAjB;AACA2C,IAAAA,mBAAmB,CAAC3C,eAAD,CAAnB;AACA4C,IAAAA,gBAAgB;AACjB,GANH,WAOS,UAACtF,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GATH;AAUD,C,CAED;;;AACA,SAASqF,mBAAT,GAA+B;AAC7B,MAAME,WAAW,GAAGjI,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAApB;AAEAgI,EAAAA,WAAW,CAACjG,gBAAZ,CAA6B,QAA7B,EAAuC,UAAAc,CAAC,EAAI;AAC1C,QAAMiB,QAAQ,GAAGjB,CAAC,CAACE,MAAF,CAASqE,KAA1B;;AAEA,QAAGtD,QAAQ,KAAK,IAAhB,EAAsB;AACpB+D,MAAAA,iBAAiB,CAAC1C,eAAD,CAAjB;AACA;AACD;;AAED,QAAM8C,SAAS,GAAG9C,eAAe,CAAC+C,MAAhB,CAAuB,UAAApH,IAAI,EAAI;AAC/C,aAAOA,IAAI,CAACgD,QAAL,KAAkBA,QAAzB;AACD,KAFiB,CAAlB;AAGA+D,IAAAA,iBAAiB,CAACI,SAAD,CAAjB;AACD,GAZD;AAaD,C,CAED;;;AACA,SAASJ,iBAAT,CAA2B1C,eAA3B,EAA4C;AAC1C,MAAIlF,GAAG,GAAG,EAAV;AACAkF,EAAAA,eAAe,CAAC7E,OAAhB,CAAwB,UAAA6H,OAAO,EAAI;AACjClI,IAAAA,GAAG,kMAIekI,OAAO,CAACC,MAJvB,6CAI4DD,OAAO,CAACpH,KAJpE,sJAMiFoH,OAAO,CAACjH,EANzF,mGAOmCiH,OAAO,CAACpH,KAP3C,4FAQiEsH,UAAU,CAACF,OAAO,CAACG,YAAT,CAR3E,8DASoCD,UAAU,CAACF,OAAO,CAACpE,KAAT,CAT9C,8DAAH;AAcD,GAfD;AAgBAiB,EAAAA,WAAW,CAACxD,SAAZ,GAAwBvB,GAAxB;AACD,C,CAED;;;AACA,SAAS8H,gBAAT,GAA4B;AAC1B/C,EAAAA,WAAW,CAACjD,gBAAZ,CAA6B,OAA7B,EAAsC,UAAAc,CAAC,EAAI;AACzCA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAGD,CAAC,CAACE,MAAF,CAASC,QAAT,KAAsB,QAAzB,EAAmC;AACjC;AACD;;AACD,QAAMG,SAAS,GAAGN,CAAC,CAACE,MAAF,CAASG,OAAT,CAAiBhC,EAAnC;AACAqH,IAAAA,UAAU,CAACpF,SAAD,CAAV;AACD,GAPD;AAQD,C,CAED;;;AACA,SAASuC,QAAT,GAAoB;AAClBxD,EAAAA,KAAK,CAACC,GAAN,CAAU4C,QAAV,EACG3C,IADH,CACQ,UAACC,GAAD,EAAS;AACbgD,IAAAA,SAAS,GAAGhD,GAAG,CAACC,IAAJ,CAASkG,KAArB;AACAC,IAAAA,WAAW,CAACpD,SAAD,CAAX;AACD,GAJH,WAKS,UAAC5C,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GAPH;AAQD,C,CAED;;;AACA,SAASgG,WAAT,CAAqBpD,SAArB,EAAgC;AAC9B,MAAMqD,KAAK,GAAG3I,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAd;AACA,MAAI4D,KAAK,GAAG,CAAZ;AACA,MAAI3D,GAAG,GAAG,EAAV;;AAEA,MAAGoF,SAAS,CAAC1D,MAAV,KAAqB,CAAxB,EAA2B;AACzB+G,IAAAA,KAAK,CAAC9G,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACAqD,IAAAA,SAAS,CAAC1D,SAAV;AAID,GAND,MAMO;AACLkH,IAAAA,KAAK,CAAC9G,SAAN,CAAgBE,MAAhB,CAAuB,QAAvB;AACAuD,IAAAA,SAAS,CAAC/E,OAAV,CAAkB,UAAAQ,IAAI,EAAI;AACxB8C,MAAAA,KAAK,IAAI9C,IAAI,CAACE,QAAL,GAAgBF,IAAI,CAACqH,OAAL,CAAapE,KAAtC;AACA9D,MAAAA,GAAG,iIAGea,IAAI,CAACqH,OAAL,CAAaC,MAH5B,sBAG4CtH,IAAI,CAACqH,OAAL,CAAapH,KAHzD,4EAIsBD,IAAI,CAACqH,OAAL,CAAapH,KAJnC,qDAMUsH,UAAU,CAACvH,IAAI,CAACqH,OAAL,CAAapE,KAAd,CANpB,gDAQKjD,IAAI,CAACE,QARV,iDAUUqH,UAAU,CAACvH,IAAI,CAACqH,OAAL,CAAapE,KAAb,GAAqBjD,IAAI,CAACE,QAA3B,CAVpB,yIAYsEF,IAAI,CAACI,EAZ3E,qEAayCJ,IAAI,CAACI,EAb9C,8DAAH;AAiBD,KAnBD,EAFK,CAsBL;;AACAjB,IAAAA,GAAG,0bAUgCoI,UAAU,CAACzE,KAAD,CAV1C,6BAAH;AAaAsB,IAAAA,SAAS,CAAC1D,SAAV,GAAsBvB,GAAtB,CApCK,CAqCL;;AACA,QAAM0I,aAAa,GAAG5I,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAtB;;AACA,QAAG2I,aAAH,EAAkB;AAChBA,MAAAA,aAAa,CAAC5G,gBAAd,CAA+B,OAA/B,EAAwC,UAAAc,CAAC,EAAI;AAC3CA,QAAAA,CAAC,CAACC,cAAF;AACA8F,QAAAA,cAAc;AACf,OAHD;AAID;AACF;AACF,C,CAED;;;AACA,SAASL,UAAT,CAAoBrH,EAApB,EAAwB;AACtB,MAAI2H,GAAG,GAAG,CAAV;AAEAxD,EAAAA,SAAS,CAAC/E,OAAV,CAAkB,UAAAQ,IAAI,EAAI;AACxB,QAAGA,IAAI,CAACqH,OAAL,CAAajH,EAAb,KAAoBA,EAAvB,EAA2B;AACzB2H,MAAAA,GAAG,GAAG/H,IAAI,CAACE,QAAL,IAAiB,CAAvB;AACD;AACF,GAJD;AAMA,MAAMsB,IAAI,GAAG;AACX,YAAQ;AACN,mBAAapB,EADP;AAEN,kBAAY2H;AAFN;AADG,GAAb;AAOA3G,EAAAA,KAAK,CAACyF,IAAN,CAAW5C,QAAX,EAAqBzC,IAArB,EACCF,IADD,CACM,UAACC,GAAD,EAAS;AACbgD,IAAAA,SAAS,GAAGhD,GAAG,CAACC,IAAJ,CAASkG,KAArB;AACAC,IAAAA,WAAW,CAACpD,SAAD,CAAX;AACA7B,IAAAA,WAAW,CAAC,QAAD,EAAW,SAAX,CAAX;AACD,GALD,WAMO,UAACf,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAgB,IAAAA,SAAS,CAAC,SAAD,EAAY,OAAZ,CAAT;AACD,GATD;AAUD,C,CAED;;;AACA,IAAGyB,SAAH,EAAc;AACZA,EAAAA,SAAS,CAACnD,gBAAV,CAA2B,OAA3B,EAAoC,UAAAc,CAAC,EAAI;AACvCA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAMgG,UAAU,GAAGjG,CAAC,CAACE,MAAF,CAASgG,YAAT,CAAsB,SAAtB,CAAnB;;AAEA,QAAGlG,CAAC,CAACE,MAAF,CAASC,QAAT,KAAsB,GAAtB,IAA6BH,CAAC,CAACE,MAAF,CAASC,QAAT,KAAsB,GAAtD,EAA2D;AACzD;AACD,KAFD,MAEO;AACLgG,MAAAA,eAAe,CAACF,UAAD,CAAf;AACA;AACD;AACF,GAVD;AAWD,C,CAED;;;AACA,SAASE,eAAT,CAAyB9H,EAAzB,EAA6B;AAC3B,MAAM+H,GAAG,oEAA6DpK,QAA7D,oBAA+EqC,EAA/E,CAAT;AACAgB,EAAAA,KAAK,UAAL,CAAa+G,GAAb,EAAkB/H,EAAlB,EACGkB,IADH,CACQ,UAACC,GAAD,EAAS;AACbgD,IAAAA,SAAS,GAAGhD,GAAG,CAACC,IAAJ,CAASkG,KAArB;AACAC,IAAAA,WAAW,CAACpD,SAAD,CAAX;AACD,GAJH,WAKS,UAAC5C,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GAPH;AAQD,C,CAED;;;AACA,SAASmG,cAAT,GAA0B;AACxB1G,EAAAA,KAAK,UAAL,CAAa6C,QAAb,EACG3C,IADH,CACQ,UAACC,GAAD,EAAS;AACboG,IAAAA,WAAW,CAACpG,GAAG,CAACC,IAAJ,CAASkG,KAAV,CAAX;AACAhF,IAAAA,WAAW,CAAC,QAAD,EAAW,SAAX,CAAX;AACD,GAJH,WAKS,UAACf,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAgB,IAAAA,SAAS,CAAC,MAAD,EAAS,OAAT,CAAT;AACD,GARH;AASD,C,CAED;;;AACA,SAAS4E,UAAT,CAAoBQ,GAApB,EAAyB;AACvB,MAAMK,MAAM,GAAGL,GAAG,CAACM,QAAJ,EAAf;AACA,SAAOD,MAAM,CAACE,OAAP,CAAe,iCAAf,EAAkD,GAAlD,CAAP;AACD,C,CAED;;;AACA,SAASzD,kBAAT,GAA8B;AAC5B5F,EAAAA,QAAQ,CAACgC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAY;AACxD,QAAMsH,GAAG,GAAGtJ,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAZ;AACAqJ,IAAAA,GAAG,CAACC,KAAJ,CAAUC,MAAV,GAAmB,MAAnB;AACA,QAAIC,GAAG,GAAG;AAAEC,MAAAA,GAAG,EAAE,CAAP;AAAUC,MAAAA,IAAI,EAAE,CAAhB;AAAmBC,MAAAA,CAAC,EAAE,CAAtB;AAAyBpK,MAAAA,CAAC,EAAE;AAA5B,KAAV;;AACA,QAAMqK,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAU/G,CAAV,EAAa;AACpCwG,MAAAA,GAAG,CAACC,KAAJ,CAAUC,MAAV,GAAmB,UAAnB;AACAF,MAAAA,GAAG,CAACC,KAAJ,CAAUO,UAAV,GAAuB,MAAvB;AAEAL,MAAAA,GAAG,GAAG;AACJE,QAAAA,IAAI,EAAEL,GAAG,CAACS,UADN;AAEJL,QAAAA,GAAG,EAAEJ,GAAG,CAACU,SAFL;AAGJ;AACAJ,QAAAA,CAAC,EAAE9G,CAAC,CAACmH,OAJD;AAKJzK,QAAAA,CAAC,EAAEsD,CAAC,CAACoH;AALD,OAAN;AAQAlK,MAAAA,QAAQ,CAACgC,gBAAT,CAA0B,WAA1B,EAAuCmI,gBAAvC;AACAnK,MAAAA,QAAQ,CAACgC,gBAAT,CAA0B,SAA1B,EAAqCoI,cAArC;AACD,KAdD;;AAeA,QAAMD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUrH,CAAV,EAAa;AACpC;AACA,UAAMuH,EAAE,GAAGvH,CAAC,CAACmH,OAAF,GAAYR,GAAG,CAACG,CAA3B;AACA,UAAMU,EAAE,GAAGxH,CAAC,CAACoH,OAAF,GAAYT,GAAG,CAACjK,CAA3B,CAHoC,CAKpC;;AACA8J,MAAAA,GAAG,CAACU,SAAJ,GAAgBP,GAAG,CAACC,GAAJ,GAAUY,EAA1B;AACAhB,MAAAA,GAAG,CAACS,UAAJ,GAAiBN,GAAG,CAACE,IAAJ,GAAWU,EAA5B;AACD,KARD;;AASA,QAAMD,cAAc,GAAG,SAAjBA,cAAiB,GAAY;AACjCd,MAAAA,GAAG,CAACC,KAAJ,CAAUC,MAAV,GAAmB,MAAnB;AACAF,MAAAA,GAAG,CAACC,KAAJ,CAAUgB,cAAV,CAAyB,aAAzB;AAEAvK,MAAAA,QAAQ,CAACwK,mBAAT,CAA6B,WAA7B,EAA0CL,gBAA1C;AACAnK,MAAAA,QAAQ,CAACwK,mBAAT,CAA6B,SAA7B,EAAwCJ,cAAxC;AACD,KAND,CA5BwD,CAmCxD;;;AACAd,IAAAA,GAAG,CAACtH,gBAAJ,CAAqB,WAArB,EAAkC6H,gBAAlC;AACD,GArCD;AAsCD;;;AC1YC;AACA,SAASpG,WAAT,CAAqBzC,KAArB,EAA4BP,MAA5B,EAAoCgK,IAApC,EAA0C;AACxCC,EAAAA,IAAI,CAACC,IAAL,CAAU;AACRC,IAAAA,IAAI,EAAEnK,MADE;AAERO,IAAAA,KAAK,EAAEA,KAFC;AAGRyJ,IAAAA,IAAI,EAAEA,IAHE;AAIRI,IAAAA,iBAAiB,EAAE,IAJX;AAKRvL,IAAAA,KAAK,EAAE;AALC,GAAV;AAOD,C,CAED;;;AACA,SAASoE,SAAT,CAAmB1C,KAAnB,EAA0BP,MAA1B,EAAkCgK,IAAlC,EAAwC;AACtCC,EAAAA,IAAI,CAACC,IAAL,CAAU;AACRC,IAAAA,IAAI,EAAEnK,MADE;AAERO,IAAAA,KAAK,EAAEA,KAFC;AAGRyJ,IAAAA,IAAI,EAAEA,IAHE;AAIRI,IAAAA,iBAAiB,EAAE;AAJX,GAAV;AAMD","file":"all.js","sourcesContent":["const api_path = \"js-2022\";\nconst token = \"kk6wTiHvysgMHTb81Mkv3q2j0M23\";\nconst config = {\n    headers: {\n      'Authorization': token\n    }\n  };","const urlAdminOrders = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`;\n\nlet ordersData = [];\n\n// 訂單日期\nfunction orderCreateDate(ms){\n  const timer = new Date(ms * 1000);\n  const y = timer.getFullYear() ;\n  const m = timer.getMonth()+1 >= 10 \n    ? timer.getMonth()+1 \n    : `0${timer.getMonth()+1}`;\n  const d = timer.getDate() >= 10 \n    ? timer.getDate() \n    : `0${timer.getDate()}`;\n  return `${y}/${m}/${d}`;\n};\n\n// 渲染訂單畫面\nfunction renderOrders(ordersData) {\n  const orderList = document.querySelector('#ordersList');\n  let str = '';\n  // 訂單排序新到舊\n  ordersData.sort((a,b) => b.createdAt - a.createdAt);\n\n  ordersData.forEach(order => {\n    let status = order.paid ? '已處理' : '未處理';\n    const orderDate = orderCreateDate(order.createdAt);\n    const orderProducts = order.products.map(item => {\n      return `${item.title} x ${item.quantity}`;\n    }).join('<br>');\n\n    str += `\n    <tr class=\"align-middle\">\n      <th scope=\"row\">${order.id}</th>\n      <td>${order.user.name}<br>${order.user.tel}</td>\n      <td>${order.user.address}</td>\n      <td>${order.user.email}</td>\n      <td>${orderProducts}</td>\n      <td>${orderDate}</td>\n      <td class=\"text-info\">\n        <a href=\"#!\" class=\"text-decoration-underline link-info\" data-paid=\"${order.paid}\" data-id=\"${order.id}\">\n          ${status}\n        </a>\n      </td>\n      <td>\n        <button type=\"button\" class=\"btn btn-danger\" data-id=\"${order.id}\" >刪除</button>\n      </td>\n    </tr>`\n  })\n  orderList.innerHTML = str;\n  renderBtnDelete();\n}\n\n// 渲染按鈕 清除全部訂單\nfunction renderBtnDelete() {\n  const btnDeleteAll = document.querySelector('#btnDeleteAll');\n  if(ordersData.length === 0) {\n    btnDeleteAll.classList.add('d-none');\n  } else {\n    btnDeleteAll.classList.remove('d-none');\n  }\n  btnDeleteAll.addEventListener('click', deleteOrderAll);\n}\n\n// 取得訂單資料\nfunction getOrders() {\n  axios.get(urlAdminOrders,config)\n    .then((res) => {\n      ordersData = res.data.orders;\n      renderChart(ordersData);\n      renderOrders(ordersData);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n// 訂單點擊事件監聽\nfunction orderListClick() {\n  const orderList = document.querySelector('#ordersList');\n  if (orderList) {\n    orderList.addEventListener('click', e=> {\n      e.preventDefault();\n      if(e.target.nodeName === 'A') {\n        let isPaid = e.target.dataset.paid;\n        const productId = e.target.dataset.id;\n        isPaid = isPaid === 'false' ? false : true;\n        editOrders(productId, isPaid);\n        return;\n      } else if (e.target.nodeName === 'BUTTON') {\n        const orderId = e.target.dataset.id;\n        deleteOrder(orderId);\n        return;\n      } else {\n        return;\n      }\n    })\n  }\n}\n\n// 修改訂單狀態\nfunction editOrders(id, isPaid) {\n  isPaid = !isPaid;\n\n  const data = {\n      \"data\": {\n        \"id\": id,\n        \"paid\": isPaid\n      }\n    };\n\n  axios.put(urlAdminOrders, data, config)\n    .then((res) => {\n      ordersData = res.data.orders;\n      renderOrders(ordersData);\n      swalSuccess('修改訂單成功', 'success');\n    }).catch(() => {\n      swalError('修改訂單失敗', 'error');\n    });\n}\n\n// 刪除單筆訂單\nfunction deleteOrder(id) {\n  const urlDeleteOrder = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${id}`;\n  axios.delete(urlDeleteOrder,config)\n    .then((res) => {\n      ordersData = res.data.orders;\n      renderOrders(ordersData);\n      renderChart(ordersData);\n      swalSuccess('已刪除單筆訂單', 'success');\n    })\n    .catch((err) => {\n      console.log(err);\n      swalError('刪除單筆訂單失敗', 'error');\n    });\n}\n\n// 刪除所有訂單\nfunction deleteOrderAll() {\n  axios.delete(urlAdminOrders,config)\n    .then((res) => {\n      ordersData = res.data.orders;\n      renderOrders(ordersData);\n      renderChart(ordersData);\n      swalSuccess('已刪除所有訂單', 'success');\n    })\n    .catch(() => {\n      swalError('目前沒有訂單', 'warning');\n    })\n}\n\n// c3 圖表\nfunction renderChart(ordersData) {\n  const chartDisplay = document.querySelector('#chart');\n  if(ordersData.length === 0){\n    chartDisplay.classList.add('d-none');\n  } else {\n    chartDisplay.classList.remove('d-none');\n  }\n  \n  let total = {};\n  ordersData.forEach(order => {\n    order.products.forEach(productItem => {\n      total[productItem.category] \n        ? total[productItem.category] += productItem.price * productItem.quantity\n        : total[productItem.category] = productItem.price * productItem.quantity;\n    })\n  });\n\n  const chartData = Object.entries(total);\n  const chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n      columns: chartData,\n      type: \"pie\",\n      colors: {\n        床架: \"#DACBFF\",\n        收納: \"#9D7FEA\",\n        窗簾: \"#5434A7\",\n        其他: \"#301E5F\",\n      },\n    },\n  });\n}","const urlProducts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`;\nconst urlCarts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\nconst productList = document.querySelector('#productList');\nconst form = document.querySelector('#orderForm');\nconst cartsList = document.querySelector('#cartsList');\n\nlet productListData;\nlet productCategory = {};\nlet cartsData = [];\n\n// 不同頁面分別執行初始化\nif (location.pathname.includes('index') ||\n    location.pathname === '/' ||\n    location.pathname === /WoWoRoom/) {\n  // 首頁\n  getProducts();\n  getCarts();\n  recommendationDrag();\n  submitForm();\n} else if (location.pathname.includes('admin')){\n  // 後臺\n  getOrders();\n  orderListClick();\n}\n\n// 驗證套件\nconst constraints = {\n  姓名: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  },\n  電話: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"號碼需超過 8 碼\"\n    }\n  },\n  Email: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    email: {\n      message: \"格式有誤\"\n    }\n  },\n  地址: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  }\n};\nconst errors = validate(form, constraints);\n\n// 顯示訂單驗證錯誤資訊\nfunction showErrorMessage(errors) {\n  const messages = document.querySelectorAll(\"[data-msg]\");\n  messages.forEach((item) => {\n    item.textContent = \"\";\n    item.textContent = errors[item.dataset.msg];\n  });\n}\n\n// 監控所有 input 的操作\nfunction checkFormInput() {\n  const inputs = document.querySelectorAll(\"[data-validate]\");\n  inputs.forEach((item) => {\n    item.addEventListener(\"change\", e => {\n      e.preventDefault();\n      // 先清空錯誤訊息\n      item.previousElementSibling.textContent = \"\";\n      const targetName = item.name;\n      const errors = validate(form, constraints);\n      // 針對正在操作的欄位呈現警告訊息\n      if (errors) {\n        document.querySelector(`[data-msg='${targetName}']`).textContent =\n          errors[targetName];\n      }\n    });\n  });\n}\n\n// 表單送出監聽\nfunction submitForm() {\n  const btnSubmitForm = document.querySelector('#btnSubmitForm');\n  btnSubmitForm.addEventListener('click', e => {\n    e.preventDefault();\n    if (!cartsData.length) {\n      swalError('購物車沒有商品!', 'error', '快去大肆採購吧ヽ(✿ﾟ▽ﾟ)ノ');\n      return;\n    } \n\n    checkFormInput();\n\n    let errors = validate(form, constraints);\n    // 有錯誤則顯示錯誤訊息\n    if(errors) {\n      showErrorMessage(errors);\n    } else {\n      addOrder();\n    }\n  });\n}\n\n// 送出訂單\nfunction addOrder() {\n  const urlOrder = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`;\n  const userName = document.querySelector(\"#userName\").value.trim();\n  const userPhone = document.querySelector(\"#userPhone\").value.trim();\n  const userEmail = document.querySelector(\"#userEmail\").value.trim();\n  const userAddress = document.querySelector(\"#userAddress\").value.trim();\n  const payMethod = document.querySelector(\"#payMethod\").value;\n\n  const order = {\n    data: {\n      user: {\n        name: userName,\n        tel: userPhone,\n        email: userEmail,\n        address: userAddress,\n        payment: payMethod,\n      }\n    }\n  }\n\n  axios.post(urlOrder,order)\n    .then(() => {\n      form.reset();\n      getCarts();\n      swalSuccess('已送出訂單', 'success');\n    })\n    .catch(() => {\n      swalError('訂單送出失敗', 'error', '請確認訂單是否填寫正確!');\n    });\n}\n\n// 取得產品列表\nfunction getProducts() {\n  axios.get(urlProducts)\n    .then((res) => {\n      productListData = res.data.products;\n      renderProductList(productListData);\n      productFilterChange(productListData);\n      productListClick();\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n// 產品篩選\nfunction productFilterChange() {\n  const productType = document.querySelector('#productType');\n\n  productType.addEventListener('change', e => {\n    const category = e.target.value;\n\n    if(category === '全部') {\n      renderProductList(productListData);\n      return;\n    }\n\n    const filterArr = productListData.filter(item => {\n      return item.category === category;\n    });\n    renderProductList(filterArr);\n  })\n}\n\n// 渲染產品列表\nfunction renderProductList(productListData) {\n  let str = '';\n  productListData.forEach(product => {\n    str += `\n      <li class=\"products-item col-md-6 col-lg-4 col-xl-3\">\n        <div class=\"card p-0\">\n          <span class=\"products-tag\">新品</span>\n          <img src=\"${product.images}\" class=\"card-img-top\" alt=\"${product.title}\">\n          <div class=\"card-body p-0\">\n            <button type=\"button\" class=\"btn btn-black rounded-0 pb-2 w-100\" data-id=\"${product.id}\">加入購物車</button>\n            <h5 class=\"card-title pb-2\">${product.title}</h5>\n            <p class=\"card-text fs-5 text-decoration-line-through\">NT$${toThousand(product.origin_price)}</p>\n            <p class=\"card-text fs-3\">NT$${toThousand(product.price)}</p>\n          </div>\n        </div>\n      </li>\n    `;\n  })\n  productList.innerHTML = str;\n}\n\n// 加入購物車事件\nfunction productListClick() {\n  productList.addEventListener('click', e => {\n    e.preventDefault();\n    if(e.target.nodeName !== 'BUTTON') {\n      return;\n    }\n    const productId = e.target.dataset.id;\n    addToCarts(productId);\n  })\n}\n\n// 取得購物車資料\nfunction getCarts() {\n  axios.get(urlCarts)\n    .then((res) => {\n      cartsData = res.data.carts;\n      renderCarts(cartsData);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n// 顯示購物車資料\nfunction renderCarts(cartsData) {\n  const thead = document.querySelector('.cart thead');\n  let total = 0;\n  let str = '';\n\n  if(cartsData.length === 0) {\n    thead.classList.add('d-none');\n    cartsList.innerHTML = `\n      <tr class=\"text-center\">\n        <td class=\"border-0 fs-3\">目前購物車無商品!</td>\n      </tr>`;\n  } else {\n    thead.classList.remove('d-none');\n    cartsData.forEach(item => {\n      total += item.quantity * item.product.price;\n      str += `\n        <tr>\n          <th scope=\"row\" class=\"d-flex align-items-center fw-normal\">\n            <img src=\"${item.product.images}\" alt=\"${item.product.title}\" class=\"cart-product-img\">\n            <p class=\"lh-lg\">${item.product.title}</p>\n          </th>\n          <td>NT$${toThousand(item.product.price)}</td>\n          <td>\n            ${item.quantity}\n          </td>\n          <td>NT$${toThousand(item.product.price * item.quantity)}</td>\n          <td class=\"text-end\">\n            <a href=\"#!\" class=\"border-0 bg-transparent link-black\" data-id=\"${item.id}\">\n              <i class=\"fa-solid fa-x\" data-id=\"${item.id}\"></i>\n            </a>\n          </td>\n        </tr>`;\n    });\n    // 總金額\n    str += `\n      <tr class=\"carts-total\">\n        <td class=\"border-0\">\n          <button type=\"button\" class=\"btn btn-outline-black py-3 px-6\" id=\"btnClearCarts\">刪除所有品項</button>\n        </td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\">\n          <p>總金額</p>\n        </td>\n        <td class=\"border-0 fs-3\">NT$${toThousand(total)}</td>\n      </tr>\n    `\n    cartsList.innerHTML = str;\n    // 刪除所有選項按鈕\n    const btnClearCarts = document.querySelector('#btnClearCarts');\n    if(btnClearCarts) {\n      btnClearCarts.addEventListener('click', e => {\n        e.preventDefault();\n        deleteAllCarts();\n      });\n    }\n  }\n}\n\n// 加入購物車\nfunction addToCarts(id) {\n  let num = 1;\n\n  cartsData.forEach(item => {\n    if(item.product.id === id) {\n      num = item.quantity += 1;\n    }\n  })\n\n  const data = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": num\n    }\n  };\n\n  axios.post(urlCarts, data)\n  .then((res) => {\n    cartsData = res.data.carts;\n    renderCarts(cartsData);\n    swalSuccess('已加入購物車', 'success');\n  })\n  .catch((err) => {\n    console.log(err);\n    swalError('加入購物車失敗', 'error');\n  });\n}\n\n// 購物車刪除事件\nif(cartsList) {\n  cartsList.addEventListener('click', e => {\n    e.preventDefault();\n    const cartItemId = e.target.getAttribute('data-id');\n\n    if(e.target.nodeName !== 'A' && e.target.nodeName !== 'I') {\n      return;\n    } else {\n      deleteCartsItem(cartItemId);\n      return;\n    }\n  });\n}\n\n// 刪除購物車單筆\nfunction deleteCartsItem(id) {\n  const url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`;\n  axios.delete(url, id)\n    .then((res) => {\n      cartsData = res.data.carts;\n      renderCarts(cartsData);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n}\n\n// 刪除購物車所有品項\nfunction deleteAllCarts() {\n  axios.delete(urlCarts)\n    .then((res) => {\n      renderCarts(res.data.carts);\n      swalSuccess('已清空購物車', 'success');\n    })\n    .catch((err) => {\n      console.log(err);\n      swalError('清空失敗', 'error');\n    });\n}\n\n// 千分位\nfunction toThousand(num) {\n  const numStr = num.toString();\n  return numStr.replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\n// 好評推薦拖拉功能\nfunction recommendationDrag() {\n  document.addEventListener(\"DOMContentLoaded\", function () {\n    const ele = document.querySelector(\".recommendation-wall\");\n    ele.style.cursor = \"grab\";\n    let pos = { top: 0, left: 0, x: 0, y: 0 };\n    const mouseDownHandler = function (e) {\n      ele.style.cursor = \"grabbing\";\n      ele.style.userSelect = \"none\";\n  \n      pos = {\n        left: ele.scrollLeft,\n        top: ele.scrollTop,\n        // Get the current mouse position\n        x: e.clientX,\n        y: e.clientY,\n      };\n  \n      document.addEventListener(\"mousemove\", mouseMoveHandler);\n      document.addEventListener(\"mouseup\", mouseUpHandler);\n    };\n    const mouseMoveHandler = function (e) {\n      // How far the mouse has been moved\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n  \n      // Scroll the element\n      ele.scrollTop = pos.top - dy;\n      ele.scrollLeft = pos.left - dx;\n    };\n    const mouseUpHandler = function () {\n      ele.style.cursor = \"grab\";\n      ele.style.removeProperty(\"user-select\");\n  \n      document.removeEventListener(\"mousemove\", mouseMoveHandler);\n      document.removeEventListener(\"mouseup\", mouseUpHandler);\n    };\n    // Attach the handler\n    ele.addEventListener(\"mousedown\", mouseDownHandler);\n  });\n}\n","  // Alert 成功\n  function swalSuccess(title, status, text) {\n    Swal.fire({\n      icon: status,\n      title: title,\n      text: text,\n      showConfirmButton: true,\n      timer: 2500\n    })\n  }\n\n  // Alert 失敗\n  function swalError(title, status, text) {\n    Swal.fire({\n      icon: status,\n      title: title,\n      text: text,\n      showConfirmButton: true,\n    })\n  }"]}