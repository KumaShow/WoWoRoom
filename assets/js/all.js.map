{"version":3,"sources":["admin.js","all.js"],"names":["api_path","token","urlAdminOrders","orderList","document","querySelector","btnDeleteAll","renderOrders","ordersData","str","forEach","order","status","paid","user","name","tel","address","email","products","title","id","innerHTML","getOrders","axios","get","headers","then","res","data","orders","console","log","length","classList","add","remove","category","item","renderChart","addEventListener","e","isPaid","target","dataset","orderId","nodeName","editOrders","deleteOrder","put","err","urlDeleteOrder","deleteOrderAll","alert","categoryData","Object","entries","chart","c3","generate","bindto","columns","type","colors","床架","收納","窗簾","其他","initAdmin","urlProducts","urlCarts","productList","form","inputs","querySelectorAll","messages","preventDefault","addOrder","urlOrder","userName","value","trim","userPhone","userEmail","userAddress","payMethod","payment","post","reset","getCarts","getProducts","productListData","renderProductList","product","images","origin_price","price","cartsData","productId","addToCarts","carts","renderCarts","thead","total","cartsList","quantity","num","deleteCartsItem","url","deleteAllCarts","init"],"mappings":"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","file":"all.js","sourcesContent":["const api_path = \"js-2022\";\nconst token = \"kk6wTiHvysgMHTb81Mkv3q2j0M23\";\nconst urlAdminOrders = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`;\n\nconst orderList = document.querySelector('#ordersList');\nconst btnDeleteAll = document.querySelector('#btnDeleteAll');\n\n// 渲染訂單畫面\nfunction renderOrders(ordersData) {\n  let str = '';\n  ordersData.forEach(order => {\n    let status = order.paid ? '已處理' : '未處理';\n    // order.products.forEach(item => {\n    //   // str += `\n    //   //   <tr class=\"align-middle\">\n    //   //     <th scope=\"row\">10088377474</th>\n    //   //     <td>${order.user.name}<br>${order.user.tel}</td>\n    //   //     <td>${order.user.address}</td>\n    //   //     <td>${order.user.email}</td>\n    //   //     <td>${item.title}</td>\n    //   //     <td>2021/03/08</td>\n    //   //     <td class=\"text-info\">\n    //   //       <a href=\"#!\" class=\"text-decoration-underline link-info\" data-paid=\"${order.paid}\" data-id=\"${order.id}\">\n    //   //         ${status}\n    //   //       </a>\n    //   //     </td>\n    //   //     <td>\n    //   //       <button type=\"button\" class=\"btn btn-danger\" data-id=\"${order.id}\">刪除</button>\n    //   //     </td>\n    //   //   </tr>`\n    // })\n    str += `\n    <tr class=\"align-middle\">\n      <th scope=\"row\">10088377474</th>\n      <td>${order.user.name}<br>${order.user.tel}</td>\n      <td>${order.user.address}</td>\n      <td>${order.user.email}</td>\n      <td>${order.products[0].title}</td>\n      <td>2021/03/08</td>\n      <td class=\"text-info\">\n        <a href=\"#!\" class=\"text-decoration-underline link-info\" data-paid=\"${order.paid}\" data-id=\"${order.id}\">\n          ${status}\n        </a>\n      </td>\n      <td>\n        <button type=\"button\" class=\"btn btn-danger\" data-id=\"${order.id}\">刪除</button>\n      </td>\n    </tr>`\n  })\n  orderList.innerHTML = str;\n}\nlet ordersData = [];\n// 取得訂單資料\nfunction getOrders() {\n  axios.get(urlAdminOrders,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(res => {\n      ordersData = res.data.orders;\n      console.log(ordersData); \n      \n      if(ordersData.length === 0) {\n        btnDeleteAll.classList.add('d-none');\n      } else {\n        btnDeleteAll.classList.remove('d-none');\n      }\n\n      const category = {};\n      ordersData.forEach(order => {\n        order.products.forEach(item => {\n          console.log(item.category);\n          category[item.category] \n            ? category[item.category]++ \n            : category[item.category] = 1;\n        })\n      })\n      console.log(category);\n      renderOrders(ordersData);\n      renderChart(category);\n    });\n}\n\n// 訂單事件\norderList.addEventListener('click', e => {\n  let isPaid = e.target.dataset.paid;\n  const orderId = e.target.dataset.id;\n  const target = e.target.nodeName;\n  if (target === 'A') {\n    editOrders(orderId, isPaid);\n  } else if (target === 'BUTTON') {\n    deleteOrder(orderId);\n  }else if(target !== 'A' || target !== 'BUTTON') {\n    return;\n  }\n})\n\n// 修改訂單狀態\nfunction editOrders(id) {\n  axios.put(urlAdminOrders,\n    {\n      \"data\": {\n        \"id\": id,\n        \"paid\": true\n      }\n    },\n    {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token\n      }\n    })\n  .then(res => {\n    console.log(res);\n    getOrders();\n  }).catch(err => console.log(err));\n}\n// 刪除單筆訂單\nfunction deleteOrder(id) {\n  const urlDeleteOrder = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${id}`;\n  axios.delete(urlDeleteOrder,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(() => {\n    getOrders();\n  }).catch(() => {\n    console.log('無該筆訂單資料');\n  });\n}\n// 監聽清除全部訂單按鈕\nbtnDeleteAll.addEventListener('click', deleteOrderAll);\n// 刪除所有訂單\nfunction deleteOrderAll() {\n  axios.delete(urlAdminOrders,{\n    headers: {\n      'Authorization': token\n    }\n  }).then(() => {\n    getOrders();\n    alert('已刪除所有訂單!');\n  }).catch(() => {\n    alert('目前沒有訂單資料!');\n  })\n}\n\n// 圖表\nfunction renderChart(category) {\n  const categoryData = Object.entries(category);\n  const chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n      columns: categoryData,\n      type: \"pie\",\n      colors: {\n        床架: \"#DACBFF\",\n        收納: \"#9D7FEA\",\n        窗簾: \"#5434A7\",\n        其他: \"#301E5F\",\n      },\n    },\n  });\n}\n\n\n/* TODO \n  1. 訂單品項 目前只有單筆、未抓取陣列\n  2. 訂單日期 根據送出日期產生\n  3. 訂單狀態 點擊切換狀態 (目前無法 toggle 切換)\n  5. 圖表 切換\n*/\nfunction initAdmin() {\n  getOrders();\n}\n\ninitAdmin();","const api_path = \"js-2022\";\nconst urlProducts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`;\nconst urlCarts = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`;\n\nconst productList = document.querySelector('#productList');\nconst form = document.querySelector('#orderForm');\nconst inputs = document.querySelectorAll(\"[data-validate]\");\nconst messages = document.querySelectorAll(\"[data-msg]\");\n\n// let pathName = location.pathname;\n// if(pathName.includes('index')) {}\n\n\n// TODO: 驗證套件\n/*\nconst constraints = {\n  姓名: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  },\n  電話: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    length: {\n      minimum: 8,\n      message: \"號碼需超過 8 碼\"\n    }\n  },\n  Email: {\n    presence: {\n      message: \"是必填欄位\"\n    },\n    email: {\n      message: \"格式有誤\"\n    }\n  },\n  地址: {\n    presence: {\n      message: \"是必填欄位\"\n    }\n  }\n};\nconst errors = validate(form, constraints);\n\n// 顯示訂單驗證錯誤資訊\nfunction showErrorMessage(errors) {\n  messages.forEach((item) => {\n    item.textContent = \"\";\n    item.textContent = errors[item.dataset.msg];\n  });\n}\n\n// 監控所有 input 的操作\ninputs.forEach((item) => {\n  item.addEventListener(\"change\", e => {\n    e.preventDefault();\n    const targetName = item.name;\n    const errors = validate(form, constraints);\n    item.previousElementSibling.textContent = \"\";\n    // 針對正在操作的欄位呈現警告訊息\n    if (errors) {\n      document.querySelector(`[data-msg='${targetName}']`).textContent =\n        errors[targetName];\n    }\n  });\n});\n*/\n\n\n// 表單送出監聽\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  // console.log(errors);\n  // if (errors) {\n  //   showErrorMessage(errors);\n  // } else {\n    addOrder();\n  // }\n});\n\n// 送出訂單\nfunction addOrder() {\n  const urlOrder = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`;\n  const userName = document.querySelector(\"#userName\").value.trim();\n  const userPhone = document.querySelector(\"#userPhone\").value.trim();\n  const userEmail = document.querySelector(\"#userEmail\").value.trim();\n  const userAddress = document.querySelector(\"#userAddress\").value.trim();\n  const payMethod = document.querySelector(\"#payMethod\").value;\n\n  const order = {\n    data: {\n      user: {\n        name: userName,\n        tel: userPhone,\n        email: userEmail,\n        address: userAddress,\n        payment: payMethod,\n      }\n    }\n  }\n\n  axios.post(urlOrder,order)\n    .then(res => {\n      form.reset();\n      getCarts();\n      alert('已送出訂單');\n    })\n    .catch(err => console.log('提交訂單失敗，請重新確認'));\n}\n\n// 取得產品列表\nfunction getProducts() {\n  axios.get(urlProducts)\n  .then((res) => {\n    const productListData = res.data.products;\n    renderProductList(productListData);\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n}\n\n// 渲染產品列表\nfunction renderProductList(productListData) {\n  let str = '';\n  productListData.forEach(product => {\n    str += `\n      <li class=\"products-item col-md-6 col-lg-4 col-xl-3\">\n        <div class=\"card p-0\">\n          <span class=\"products-tag\">新品</span>\n          <img src=\"${product.images}\" class=\"card-img-top\" alt=\"${product.title}\">\n          <div class=\"card-body p-0\">\n            <button type=\"button\" class=\"btn btn-black rounded-0 pb-2 w-100\" data-id=\"${product.id}\">加入購物車</button>\n            <h5 class=\"card-title pb-2\">${product.title}</h5>\n            <p class=\"card-text fs-5 text-decoration-line-through\">NT$${product.origin_price}</p>\n            <p class=\"card-text fs-3\">NT$${product.price}</p>\n          </div>\n        </div>\n      </li>\n    `;\n  })\n  productList.innerHTML = str;\n}\n\nlet cartsData;\n// 加入購物車\nproductList.addEventListener('click', e => {\n  if(e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const productId = e.target.dataset.id;\n\n  addToCarts(productId);\n})\n\n// 取得購物車資料\nfunction getCarts() {\n  axios.get(urlCarts)\n    .then(res => {\n      cartsData = res.data.carts;\n      renderCarts(cartsData);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\n// 顯示購物車資料\nfunction renderCarts(cartsData) {\n  const thead = document.querySelector('.cart thead');\n  let total = 0;\n  let str = '';\n\n  if(cartsData.length === 0) {\n    thead.classList.add('d-none');\n    cartsList.innerHTML = `\n      <tr class=\"text-center\">\n        <td class=\"border-0 fs-3\">目前購物車無商品!</td>\n      </tr>\n    `;\n  } else {\n    thead.classList.remove('d-none');\n    cartsData.forEach(item => {\n      total += item.quantity * item.product.price;\n      str += `\n        <tr>\n          <th scope=\"row\" class=\"d-flex align-items-center fw-normal\">\n            <img src=\"${item.product.images}\" alt=\"${item.product.title}\" class=\"cart-product-img\">\n            <p class=\"lh-lg\">${item.product.title}</p>\n          </th>\n          <td>NT$${item.product.price}</td>\n          <td>${item.quantity}</td>\n          <td>NT$${item.product.price * item.quantity}</td>\n          <td class=\"text-end\">\n            <button type=\"button\" class=\"border-0 bg-transparent\" data-id=\"${item.id}\" \n            onClick=\"deleteCartsItem('${item.id}')\">\n              <i class=\"fa-solid fa-x\"></i>\n            </button>\n          </td>\n        </tr>\n      `;\n    });\n    // 總金額\n    str += `\n      <tr class=\"carts-total\">\n        <td class=\"border-0\">\n          <button type=\"button\" class=\"btn btn-outline-black py-3 px-6\" onclick=\"deleteAllCarts()\">刪除所有品項</button>\n        </td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\"></td>\n        <td class=\"border-0\">\n          <p>總金額</p>\n        </td>\n        <td class=\"border-0 fs-3\">NT$${total}</td>\n      </tr>\n    `\n    cartsList.innerHTML = str;\n  }\n}\n\n// 加入購物車\nfunction addToCarts(id) {\n  let num = 1;\n  cartsData.forEach(item => {\n    if(item.product.id === id) {\n      num = item.quantity += 1;\n    }\n  })\n  const data = {\n    \"data\": {\n      \"productId\": id,\n      \"quantity\": num\n    }\n  };\n\n  axios.post(urlCarts, data)\n  .then(res => {\n    getCarts();\n    console.log('已加入購物車');\n    // alert(\"已加入購物車\");\n  })\n  .catch(err => console.log(err));\n}\n\n// 刪除購物車單筆(設置在 dom onclick)\nfunction deleteCartsItem(id) {\n  const url = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${id}`;\n\n  axios.delete(url,id)\n    .then(res => {\n      getCarts();\n    })\n    .catch(err => {\n      console.log('沒有這筆資料');\n    })\n}\n\n// 刪除購物車所有品項(設置在 dom onclick)\nfunction deleteAllCarts() {\n  axios.delete(urlCarts)\n    .then(res => {\n      alert('購物車已清空');\n      getCarts();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\n\nfunction init() {\n  getProducts();\n  getCarts();\n}\ninit();\n\n"]}